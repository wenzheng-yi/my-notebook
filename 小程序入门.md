#### 小程序与普通网页的区别

1、线程

- 网页开发是单线程的，js线程和渲染线程是互斥的
- 小程序有一条js逻辑线程和多条渲染线程两种线程

**注意点：**因为小程序只有一个JsCode线程，页面由多个，所以，在小程序切换页面时，小程序的逻辑层依旧运行在同一个JsCode线程中。如果页面使用了setTimeout或setInterval的定时器后，跳转到其他页面时，这些定时器并没有被清楚，需要开发者自己在页面离开的时候进行清理。

2、DOM

- 网页开发可以操作DOM
- 小程序中不能操作DOM

3、运行环境

- 网页是在PC端和移动端的浏览器上运行
- 小程序是在andioid、ios、小程序开发者工具上运行

#### 小程序代码组成

1、JSON配置

2、WXML模板，类似于html文件。

3、WXSS样式，类似于CSS文件。

4、js将本，即js文件。

#### WXSS和css不一样的地方

- wxss拥有相对的尺寸单位rpx，一个单位的rpx 是手机宽度的1/750
  外联样式可用@import 导入
- background-image 里的图片为网络图片时，其图片所在网络的域名要经过微信许可。
- position 为absolute 的元素，需要position 为fixed 的容器。（这是由小程序的文档流中不存在window、document对象导致的）  

#### 注意点：

- 小程序中不能操作DOM，但并不是说没有DOM，只是为了安全级别，把DOM隐藏起来了
- {{}}里面的数据是动态渲染的数据，如果数据不需要动态变更，可以不使用{{}}。比如`wx:key='id'`

#### 宿主及宿主环境

- 宿主环境是微信客户端给小程序提供的一种环境 。
- 宿主指的就是微信客户端，也就是官方API里的wx 对象。
- 宿主环境会把我们写的各种文件整合到一起，进行解析，然后在微信APP 里显示出我们所看到的样子。
- 宿主环境可以为小程序提供微信客户端的能力，比如微信扫码，这是普通网页不具备的。

#### 双线程下的界面渲染原理

1、在渲染层，宿主环境会把WXML转化成对应的JS对象，也就是虚拟Dom。

2、在逻辑层发生数据变更的时候，我们可以用setData方法把数据从逻辑层传递到渲染层。

3、在渲染层对比虚拟Dom的前后差异，把差异应用在真实Dom上，渲染出正确的UI界面。

#### 点开微信小程序到进入微信小程序，微信客户端做了什么

1、点开微信小程序

2、微信客户端初始化宿主环境，同时，查看本地缓存、从网络下载小程序代码包，注入宿主环境

3、派发onLaunch事件。APP构造器参数所定义的onLaunch方法被微信客户端调用

4、进入微信小程序

#### 小程序的后台状态和前台状态

- 后台状态：用户点击小程序右上角关闭按钮，或手机home键时，虽然离开了小程序，但小程序并不会被销毁，而是进入后台状态，此时，APP构造器参数里的onHide方法会被调用。
- 前台状态：用户再次进入小程序时，微信用户端会唤醒后台状态的微信小程序，微信小程序就进入了前台状态，onShow方法会被调用。

**注意点：**APP的生命周期是由用户操作主动触发的，开发者不能在代码里主动调用。

#### 页面的生命周期

- 页面初次加载时：onLoad，在页面没被销毁之前只会触发1次。
- 页面显示时：onShow  ，从别的页面返回到当前页面时，都会被调用。
- 页面初次渲染完成时：onReady，在页面没被销毁前只会触发1次，在逻辑层可以和视图层进行交互。
- 页面不可见时：onHide，wx.navigateTo切换到其他页面、底部tab切换时触发。
- 返回到其它页时：onUnload，wx.redirectTo或wx.navigateBack使当前页面会被微信客户端销毁回收时触发。

#### 页面的用户行为

- 下拉刷新 onPullDownRefresh：监听用户下拉刷新事件，需要在全局或具体页面的json 文件中配置enablePullDownRefresh为true。
- 上拉触底 onReachBottom：监听用户上拉触底事件。可以在app.json的window选项中或页面配置page.json中设置触发距离onReachBottomDistance。在触发距离内滑动期间，本事件只会被触发一次。
- 页面滚动 onPageScroll：监听用户滑动页面事件，参数为 Object，包含 scrollTop 字段，表示页面在垂直方向已滚动的距离（单位px）。
- 用户转发 onShareAppMessage：只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮，在用户点击转发按钮的时候会调用，此事件需要return一个Object，包含title和path两个字段，用于自定义转发内容

#### 页面数据的注意事项

- 用数据驱动视图渲染要用this.setData()，如果用this.data，这不仅无法驱动视图，还会造成数据不一致。
- 由于setData是两个线程间的通信，为了提高性能，每次设置的数据不应超过1024KB 。
- 不要把data中的任意一项的value设为undefined，否则可能会有引起一些不可预料的bug。（可以设置为空字符串或null）

#### 页面跳转

- 在 app.json 中用 tabBar 属性设置跳转方式
- 在 wxml 页使用导航组件 navigator 跳转页面
- 在 js 中用 路由API 跳转

#### 父子组件的数据传递

1、父组件向子组件传递数据：属性

2、子组件向父组件传递数据：事件

#### 事件捕捉和事件冒泡

1、bind前加上capture-表示事件捕捉，它是从外往里，从上往下的

2、若不加前缀，则表示事件冒泡，它是从里往外，从下往上的

